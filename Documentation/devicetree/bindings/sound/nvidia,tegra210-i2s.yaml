<<<<<<< HEAD
# SPDX-License-Identifier: (GPL-2.0)
=======
# SPDX-License-Identifier: (GPL-2.0-only OR BSD-2-Clause)
>>>>>>> v5.9-rc4
%YAML 1.2
---
$id: http://devicetree.org/schemas/sound/nvidia,tegra210-i2s.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

<<<<<<< HEAD
title: NVIDIA Tegra210 I2S (Inter-IC Sound) Controller DT Bindings

description: |
  The I2S controller implements full duplex point to point serial interfaces.
  It can operate both as master and slave. It can transmit and receive word
  lengths of 8, 16, 24 and 32. It can support following data transfer modes.
    * I2S mode
    * Left Justified Mode (LJM)
    * Right Justified Mode (RJM)
    * DSP mode, as defined in the Philips I2S bus specification
    * PCM mode with short(one bit clock wide) and long-fsync (two bit clock
      wide)

maintainers:
  - Jonathan Hunter <jonathanh@nvidia.com>
  - Sameer Pujar <spujar@nvidia.com>
  - Mohan Kumar D <mkumard@nvidia.com>

properties:
  compatible:
    oneOf:
      - items:
          description: for Tegra210 based platforms
          const: "nvidia,tegra210-i2s"
      - items:
          description: for Tegra186 based platforms
          const: "nvidia,tegra186-i2s", "nvidia,tegra210-i2s"
      - items:
          description: for Tegra194 based platforms
          const: "nvidia,tegra194-i2s", "nvidia,tegra210-i2s"

  reg:
    maxItems: 1
    description: Must contain physical base address and length of device's
      registers

  clocks:
    - items:
        description: I2S bit clock
    - items:
        description: Parent for I2S bit clock
    - items:
        description: I2S sync input clock
    - items:
        description: I2S sync mux
    - items:
        description: I2S sync input clock

  clock-names:
    - items:
        const: i2s
    - items:
        const: i2s_clk_parent
    - items:
        const: ext_audio_sync
    - items:
        const: audio_sync
    - items:
        const: clk_sync_input

  assigned-clocks:
    - items:
        description: I2S bit clock

  assigned-clock-parents:
    - items:
        description: Parent for I2S bit clock

  assigned-clock-rates:
    - items:
        description: Assigned initial rate for I2S bit clock

  "#sound-dai-cells":
    description: The cell specifies number of DAIs.
    const: 1

  nvidia,ahub-i2s-id:
    description: Must be specified with I2S instance number.

  fsync-width:
    description: Frame sync width in terms of bit clocks for I2S FSYNC mode.
      If not specified default value of 31 is used.

  bclk-ratio:
    description: Bit clock multiplier for an I2S instance. If not specified
      a default value of 1 is used.
=======
title: Tegra210 I2S Controller Device Tree Bindings

description: |
  The Inter-IC Sound (I2S) controller implements full-duplex,
  bi-directional and single direction point-to-point serial
  interfaces. It can interface with I2S compatible devices.
  I2S controller can operate both in master and slave mode.

maintainers:
  - Jon Hunter <jonathanh@nvidia.com>
  - Sameer Pujar <spujar@nvidia.com>

properties:
  $nodename:
    pattern: "^i2s@[0-9a-f]*$"

  compatible:
    oneOf:
      - const: nvidia,tegra210-i2s
      - items:
          - enum:
              - nvidia,tegra194-i2s
              - nvidia,tegra186-i2s
          - const: nvidia,tegra210-i2s

  reg:
    maxItems: 1

  clocks:
    minItems: 1
    maxItems: 2
    items:
      - description: I2S bit clock
      - description:
          Sync input clock, which can act as clock source to other I/O
          modules in AHUB. The Tegra I2S driver sets this clock rate as
          per bit clock rate. I/O module which wants to use this clock
          as source, can mention this clock as parent in the DT bindings.
          This is an optional clock entry, since it is only required when
          some other I/O wants to reference from a particular I2Sx
          instance.

  clock-names:
    minItems: 1
    maxItems: 2
    items:
      - const: i2s
      - const: sync_input

  assigned-clocks:
    minItems: 1
    maxItems: 2

  assigned-clock-parents:
    minItems: 1
    maxItems: 2

  assigned-clock-rates:
    minItems: 1
    maxItems: 2

  sound-name-prefix:
    pattern: "^I2S[1-9]$"
    $ref: /schemas/types.yaml#/definitions/string
    description:
      Used as prefix for sink/source names of the component. Must be a
      unique string among multiple instances of the same component.
      The name can be "I2S1" or "I2S2" ... "I2Sx", where x depends
      on the maximum available instances on a Tegra SoC.
>>>>>>> v5.9-rc4

required:
  - compatible
  - reg
  - clocks
  - clock-names
  - assigned-clocks
  - assigned-clock-parents
<<<<<<< HEAD
  - "#sound-dai-cells"
  - nvidia,ahub-i2s-id

examples:

  - |
    i2s@702d1000 {
        compatible = "nvidia,tegra210-i2s";
        reg = <0x702d1000 0x100>;
        clocks = <&tegra_car TEGRA210_CLK_I2S0>,
                 <&tegra_car TEGRA210_CLK_PLL_A_OUT0>,
                 <&tegra_car TEGRA210_CLK_I2S0_SYNC>,
                 <&tegra_car TEGRA210_CLK_AUDIO0_MUX>;
        clock-names = "i2s", "i2s_clk_parent", "ext_audio_sync", "audio_sync";
        assigned-clocks = <&tegra_car TEGRA210_CLK_I2S0>;
        assigned-clock-parents = <&tegra_car TEGRA210_CLK_PLL_A_OUT0>;
        assigned-clock-rates = <1536000>;
        nvidia,ahub-i2s-id = <0>;
        #sound-dai-cells = <1>;
    };

  - |
    i2s@2901000 {
        compatible = "nvidia,tegra186-i2s", "nvidia,tegra210-i2s";
        reg = <0x0 0x2901000 0x0 0x100>;
        clocks = <&tegra_car TEGRA186_CLK_I2S1>,
                 <&tegra_car TEGRA186_CLK_PLL_A_OUT0>,
                 <&tegra_car TEGRA186_CLK_I2S1_SYNC_INPUT>,
                 <&tegra_car TEGRA186_CLK_SYNC_I2S1>,
                 <&tegra_car TEGRA186_CLK_I2S1_SYNC_INPUT>;
        clock-names = "i2s", "i2s_clk_parent", "ext_audio_sync", "audio_sync", "clk_sync_input";
        assigned-clocks = <&tegra_car TEGRA186_CLK_I2S1>;
        assigned-clock-parents = <&tegra_car TEGRA186_CLK_PLL_A_OUT0>;
        assigned-clock-rates = <1536000>;
        nvidia,ahub-i2s-id = <0>;
        #sound-dai-cells = <1>;
    };

  - |
    i2s@2901000 {
        compatible = "nvidia,tegra194-i2s", "nvidia,tegra210-i2s";
        reg = <0x0 0x2901000 0x0 0x100>;
        clocks = <&bpmp_clks TEGRA194_CLK_I2S1>,
                 <&bpmp_clks TEGRA194_CLK_PLLA_OUT0>,
                 <&bpmp_clks TEGRA194_CLK_I2S1_SYNC_INPUT>,
                 <&bpmp_clks TEGRA194_CLK_SYNC_I2S1>,
                 <&bpmp_clks TEGRA194_CLK_I2S1_SYNC_INPUT>;
        clock-names = "i2s", "i2s_clk_parent", "ext_audio_sync", "audio_sync", "clk_sync_input";
        assigned-clocks = <&bpmp_clks TEGRA194_CLK_I2S1>;
        assigned-clock-parents = <&bpmp_clks TEGRA194_CLK_PLLA_OUT0>;
        assigned-clock-rates = <1536000>;
        nvidia,ahub-i2s-id = <0>;
        fsync-width = <31>;
        #sound-dai-cells = <1>;
=======

examples:
  - |
    #include<dt-bindings/clock/tegra210-car.h>

    i2s@702d1000 {
        compatible = "nvidia,tegra210-i2s";
        reg = <0x702d1000 0x100>;
        clocks = <&tegra_car TEGRA210_CLK_I2S0>;
        clock-names = "i2s";
        assigned-clocks = <&tegra_car TEGRA210_CLK_I2S0>;
        assigned-clock-parents = <&tegra_car TEGRA210_CLK_PLL_A_OUT0>;
        assigned-clock-rates = <1536000>;
        sound-name-prefix = "I2S1";
>>>>>>> v5.9-rc4
    };

...
