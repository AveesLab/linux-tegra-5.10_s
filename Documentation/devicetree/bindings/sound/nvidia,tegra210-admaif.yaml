# SPDX-License-Identifier: (GPL-2.0)
%YAML 1.2
---
$id: http://devicetree.org/schemas/sound/nvidia,tegra210-admaif.yaml#
$schema: http://devicetree.org/meta-schemas/core.yaml#

title: NVIDIA Tegra210 ADMAIF DT Bindings

description: |
  ADMAIF is the interface between ADMA and AHUB. Each ADMA channel
  that sends/receives data to/from AHUB must interface through an
  ADMAIF channel. ADMA channel sending data to AHUB pairs with ADMAIF
  Tx channel and ADMA channel receiving data from AHUB pairs with
  ADMAIF Rx channel. Buffer size is configurable for each ADMAIF
  channel.

maintainers:
  - Jonathan Hunter <jonathanh@nvidia.com>
  - Sameer Pujar <spujar@nvidia.com>
  - Mohan Kumar D <mkumard@nvidia.com>

properties:
  compatible:
    oneOf:
      - items:
          description: for Tegra210 based platforms
          const: "nvidia,tegra210-admaif"

      - items:
          description: for Tegra186 based platforms
          const: "nvidia,tegra186-admaif"

      - items:
          description: for Tegra194 based platforms
          const: "nvidia,tegra194-admaif", "nvidia,tegra186-admaif"

  reg:
    maxItems: 1
    description: Must contain physical base address and length of device's
      registers

  dmas: true

  dma-names: true

  "#sound-dai-cells":
    description: The cell specifies number of DAIs.
    const: 1

if:
  properties:
    compatible:
      contains:
        oneOf:
          - items:
              const: nvidia,tegra186-admaif
          - items:
              const: nvidia,tegra194-admaif, nvidia,tegra186-admaif

then:
  properties:
    dmas:
      description:
        Two or more DMA channel specifiers, equally divided for Tx and Rx.
      minItems: 2
      maxItems: 40
    dma-names:
      description:
        There must be atleast one channel named "tx1" for transmit and "rx1"
        for receive. If more channels need to be specified then "tx1",
        "tx2" ... "tx20" can be used. Similarly for Rx channels as well.
      minItems: 2
      maxItems: 40
      additionalItems: true
      items:
        - const: tx1
        - const: rx1
else:
  properties:
    dmas:
      description:
        Two or more DMA channel specifiers, equally divided for Tx and Rx.
      minItems: 2
      maxItems: 20
    dma-names:
      description:
        There must be atleast one channel named "tx1" for transmit and "rx1"
        for receive. If more channels need to be specified then "tx1",
        "tx2" ... "tx10" can be used. Similarly for Rx channels as well.
      minItems: 2
      maxItems: 20
      additionalItems: true
      items:
        - const: tx1
        - const: rx1

required:
  - compatible
  - reg
  - dmas
  - dma-names
  - "#sound-dai-cells"

examples:
  - |
    tegra_admaif: admaif@0x702d0000 {
        compatible = "nvidia,tegra210-admaif";
        reg = <0x702d0000 0x800>;
        dmas = <&adma 1>,  <&adma 1>,
               <&adma 2>,  <&adma 2>,
               <&adma 3>,  <&adma 3>,
               <&adma 4>,  <&adma 4>,
               <&adma 5>,  <&adma 5>,
               <&adma 6>,  <&adma 6>,
               <&adma 7>,  <&adma 7>,
               <&adma 8>,  <&adma 8>,
               <&adma 9>,  <&adma 9>,
               <&adma 10>, <&adma 10>;
        dma-names = "rx1",  "tx1",
                    "rx2",  "tx2",
                    "rx3",  "tx3",
                    "rx4",  "tx4",
                    "rx5",  "tx5",
                    "rx6",  "tx6",
                    "rx7",  "tx7",
                    "rx8",  "tx8",
                    "rx9",  "tx9",
                    "rx10", "tx10";
        #sound-dai-cells = <1>;
    };

  - |
    tegra_admaif: admaif@290f000 {
        compatible = "nvidia,tegra186-admaif";
        reg = <0x0290f000 0x1000>;
        dmas = <&adma 1>, <&adma 1>,
               <&adma 2>, <&adma 2>,
               <&adma 3>, <&adma 3>,
               <&adma 4>, <&adma 4>,
               <&adma 5>, <&adma 5>,
               <&adma 6>, <&adma 6>,
               <&adma 7>, <&adma 7>,
               <&adma 8>, <&adma 8>,
               <&adma 9>, <&adma 9>,
               <&adma 10>, <&adma 10>,
               <&adma 11>, <&adma 11>,
               <&adma 12>, <&adma 12>,
               <&adma 13>, <&adma 13>,
               <&adma 14>, <&adma 14>,
               <&adma 15>, <&adma 15>,
               <&adma 16>, <&adma 16>,
               <&adma 17>, <&adma 17>,
               <&adma 18>, <&adma 18>,
               <&adma 19>, <&adma 19>,
               <&adma 20>, <&adma 20>;
        dma-names = "rx1", "tx1",
                    "rx2", "tx2",
                    "rx3", "tx3",
                    "rx4", "tx4",
                    "rx5", "tx5",
                    "rx6", "tx6",
                    "rx7", "tx7",
                    "rx8", "tx8",
                    "rx9", "tx9",
                    "rx10", "tx10",
                    "rx11", "tx11",
                    "rx12", "tx12",
                    "rx13", "tx13",
                    "rx14", "tx14",
                    "rx15", "tx15",
                    "rx16", "tx16",
                    "rx17", "tx17",
                    "rx18", "tx18",
                    "rx19", "tx19",
                    "rx20", "tx20";
        #sound-dai-cells = <1>;
    };

...
