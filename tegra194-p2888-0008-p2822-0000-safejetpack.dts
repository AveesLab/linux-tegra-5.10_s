/*
 * Top level DTS file for CVM:P2888-0008 and CVB:P2822-0000
 *
 * Copyright (c) 2020, NVIDIA CORPORATION.  All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; version 2 of the License.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 */

#include "../../galen/kernel-dts/tegra194-p2888-0001-p2822-0000.dts"

/ {
	nvidia,dtsfilename = __FILE__;
	nvidia,dtbbuildtime = __DATE__, __TIME__;
	nvidia,fastboot-usb-vid = <0x0955>;
	nvidia,fastboot-usb-pid = <0xee1e>;

	model = "Jetson-AGXi";
	compatible = "nvidia,jetson-xavier-industrial", "nvidia,tegra194";

	/* QSPI flash S25FS512SFABHB210 is controlled by qspi0 */
	spi@3270000 {
		spi-max-frequency = <136000000>;
		status = "okay";
		prod-settings {
			#prod-cells = <3>;
			prod {
				prod = <0x04 0x000000ff 0x10>;
			};
		};
		/* QSPI NOR */
		spiflash@0 {
			#address-cells = <1>;
			#size-cells = <1>;
			compatible = "s25fs512s";
			reg = <0>;
			spi-max-frequency = <136000000>;
			partition@0 {
				label = "Whole_flash0";
				reg = <0x00000000 0x4000000>;	/* size of QSPI-NOR 64MB == 512Mb */
			};
			controller-data {
				nvidia,x1-len-limit = <16>;
				nvidia,x1-bus-speed = <136000000>; /* In Mhz */
				nvidia,x1-dymmy-cycle = <8>;
				nvidia,x4-bus-speed = <136000000>;
				nvidia,x4-dymmy-cycle = <8>;
				nvidia,x4-is-ddr=<0>;
				nvidia,ctrl-bus-clk-ratio = <1>;
			};
		};
	};
	spi@3300000 {
		spi-max-frequency = <136000000>;
		status = "okay";
		prod-settings {
			#prod-cells = <3>;
			prod {
				prod = <0x04 0x000000ff 0x10>;
			};
		};
		/* QSPI NOR */
		spiflash@0 {
			#address-cells = <1>;
			#size-cells = <1>;
			compatible = "mx75u25690f";
			reg = <0>;
			spi-max-frequency = <136000000>;
			partition@0 {
				label = "Secure_ROM";
				reg = <0x00000000 0x2000000>;	/* size of QSPI-NOR 32MB == 256Mb */
			};
			controller-data {
				nvidia,x1-len-limit = <16>;
				nvidia,x1-bus-speed = <136000000>; /* In Mhz */
				nvidia,x1-dymmy-cycle = <8>;
				nvidia,x4-bus-speed = <136000000>;
				nvidia,x4-dymmy-cycle = <8>;
				nvidia,x4-is-ddr=<0>;
				nvidia,ctrl-bus-clk-ratio = <1>;
			};
		};
	};

	sce@b000000 {
		status = "okay";
		hsp {
			nvidia,hsp-shared-mailbox = <&sce_hsp 0>;
		};
	};

	tegra-hsp@b150000 {
		status = "okay";
	};

	gpio@2200000 {
		pcie-12v-enable {
			status = "disabled";
		};
	};

	gpio@c2f0000 {
		pcie-12v-enable {
			gpio-hog;
			gpios = <TEGRA194_AON_GPIO(AA, 7) GPIO_ACTIVE_LOW>;
			label = "pcie_12v_reg";
			output-high;
			status = "okay";
		};
	};
};
