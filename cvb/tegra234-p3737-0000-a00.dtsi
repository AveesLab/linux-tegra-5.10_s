/*
 * Copyright (c) 2021, NVIDIA CORPORATION.  All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; version 2 of the License.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 */
#include <dt-bindings/gpio/tegra234-gpio.h>
#include "dt-bindings/input/input.h"
#include "tegra234-pwm-fan.dtsi"
#include "tegra234-p3737-audio.dtsi"
#include "tegra234-p3737-fixed-regulator.dtsi"
#include "tegra234-ethernet-3737-0000.dtsi"
#include "tegra234-p3737-super-module-e2614.dtsi"

/ {
	gpio-keys {
		compatible = "gpio-keys";
		gpio-keys,name = "gpio-keys";

		forcerecovery {
			label = "force-recovery";
			gpios = <&tegra_main_gpio TEGRA234_MAIN_GPIO(G, 0) GPIO_ACTIVE_LOW>;
			linux,code = <BTN_1>;
		};

		power_key {
			label = "power-key";
			gpios = <&tegra_aon_gpio TEGRA234_AON_GPIO(EE, 4) GPIO_ACTIVE_LOW>;
			linux,code = <KEY_POWER>;
			gpio-key,wakeup;
		};
	};

	soft_wdt:soft_watchdog {
		compatible = "softdog-platform";
		status = "okay";
	};

	eeprom-manager {
		data-size = <0x100>;
		bus@0 {
			i2c-bus = <&gen1_i2c>;
			eeprom@1 {
				slave-address = <0x56>;
				label = "cvb";
			};
		};

		bus@1 {
			i2c-bus = <&gen2_i2c>;
			eeprom@1 {
				slave-address = <0x50>;
				label = "super-module";
			};
		};
	};

	sdhci@3400000 {
		disable-wp;
		no-sdio;
		nvidia,cd-wakeup-capable;
		no-mmc;
		nvidia,boot-detect-delay = <1000>;
		cd-gpios = <&tegra_main_gpio TEGRA234_MAIN_GPIO(G, 7) 0>;
		status = "okay";
	};

	i2c@c240000 {
		ucsi_ccg: ucsi_ccg@8 {
#if TEGRA_XUSB_DT_VERSION >= DT_VERSION_3
			compatible = "nvidia,ccgx-ucsi";
#else
			compatible = "nvidia,ucsi_ccg";
			ccg,irqflags = <IRQF_TRIGGER_LOW>;
#endif
			reg = <0x08>;
			interrupt-parent = <&tegra_aon_gpio>;
			interrupts = <TEGRA234_AON_GPIO(BB, 2) IRQ_TYPE_LEVEL_LOW>;
#if TEGRA_XUSB_DT_VERSION < DT_VERSION_3
			wakeup-source;
#endif
			status = "okay";
		};
	};

	spi@3210000{ /* SPI1 in 40 pin conn */
		status = "disabled";
		spi@0 { /* chip select 0 */
			compatible = "tegra-spidev";
			reg = <0x0>;
			spi-max-frequency = <50000000>;
			controller-data {
				nvidia,enable-hw-based-cs;
				nvidia,rx-clk-tap-delay = <0x10>;
				nvidia,tx-clk-tap-delay = <0x0>;
			};
		};
		spi@1 { /* chip select 1 */
			compatible = "tegra-spidev";
			reg = <0x1>;
			spi-max-frequency = <50000000>;
			controller-data {
				nvidia,enable-hw-based-cs;
				nvidia,rx-clk-tap-delay = <0x10>;
				nvidia,tx-clk-tap-delay = <0x0>;
			};
		};
	};

	spi@3230000{ /* SPI3 in 40 pin conn */
		status = "disabled";
		spi@0 { /* chip select 0 */
			compatible = "tegra-spidev";
			reg = <0x0>;
			spi-max-frequency = <50000000>;
			controller-data {
				nvidia,enable-hw-based-cs;
				nvidia,rx-clk-tap-delay = <0x10>;
				nvidia,tx-clk-tap-delay = <0x0>;
			};
		};
		spi@1 { /* chips select 1 */
			compatible = "tegra-spidev";
			reg = <0x1>;
			spi-max-frequency = <50000000>;
			controller-data {
				nvidia,enable-hw-based-cs;
				nvidia,rx-clk-tap-delay = <0x10>;
				nvidia,tx-clk-tap-delay = <0x0>;
			};
		};
	};

	serial@3110000 {
		status = "disabled";
	};
	tachometer@39c0000 {
		status = "disabled";
	};
	pwm@3280000 {
		status = "disabled";
	};

	pwm@32c0000 {
		status = "disabled";
	};

	pwm@32d0000 {
		status = "disabled";
	};

	pwm@32f0000 {
		status = "disabled";
	};
	spi@c260000 {
		status = "disabled";
	};

	spi@3300000 {
		status = "disabled";
	};
};
